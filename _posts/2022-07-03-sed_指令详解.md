---
title: sed_指令详解
date: 2022-07-03 10:12:32
tags: cmd tools sed
categories: Linux
description:
---

sed命令是将一系列的编辑命令应用于一批文本的理想工具。



##  1.  sed 命令以及用法

### 1.1 什么是sed

​		sed命令是一个非交互式的文本编辑器，sed命令是一个非交互式的文本编辑器。

​		sed命令会从文件或者标准输入中一次读取一行数据，将其复制到缓冲区，然后读取命令行或者脚本的编辑子命令，对缓冲区中的文本行进行编辑。

### 1.2 sed 用途

-   编辑一个非常大的文本文件，以至于使用普通的交互式编辑器非常慢。
-   编辑命令比较复杂，在普通的文本编辑器中难以完成。
-   扫描一个比较大的文本文件，并且需要经过一系列的操作。

### 1.3 sed工作流程

​		sed命令编辑的文件是原始文件在缓冲区中的副本，因此编辑操作并不影响原来的文件，并且输出到屏幕。如果用户想要将处理结果保存下来，可以将输出重定向到一个磁盘文件中。

![image-20220703215959629](https://eagle-ice-blog.oss-cn-guangzhou.aliyuncs.com/img/image-20220703215959629.png)

### 1.4 sed 基本语法

```shell
sed [options] [script] [inputfile...]
```

在上面的语法中，options代表sed命令的选项，常用的选项如下所列。

-   -n：取消默认输出。`用户没有使用-n选项，在缓冲区中的内容会被输出到标准输出`
-   -e：允许执行多个脚本。
-   -f：从脚本文件中读取命令。
-   -i：直接修改原始文件。
-   -l：指定行的长度。
-   -r：在脚本中使用扩展正则表达式。
-   -s：默认情况下，sed将把命令行指定的多个文件名作为一个长的连续的输入流。而GNU sed则允许把它们当做单独的文件，这样的话，正则表达式不进行跨文件匹配。
-   -u：最低限度的缓存输入与输出。

​	script参数表示sed脚本文件，用户可以将一系列的sed命令写在一个脚本文件中，sed会从该文件中读取并依次执行各个命令。inputfile表示输入文本文件，如果没有指定输入文件，则从标准输入中读取。

### 1.5 sed 命令工作方式

#### 1.5.1 户直接执行sed命令

```shell
sed [options] commands inputfile
```

​		commands表示sed的相关操作命令，例如打印文本、删除文件，以及插入文本等。

#### 1.5.2 可以将sed操作命令写入脚本文件，然后通过sed执行

```sh
sed [options] -f script inputfile
```

scirpt代表一系列的sed操作命令。

#### 1.5.3 可以通过sed操作命令写入文件，然后将该脚本文件赋予执行权限直接执行

```sh
./script inputfile
```

script代表保存sed命令的脚本文件,sed 脚本的第一行应该如下：

```bash
#!/bin/sed
```

### <span id="1.6">1.6 sed 文件定位</span>

#### 1.6.1 普通定位

``` 
x          ---- x是一个整数，代表特定的文本行的行号
x,y        ---- x表示起始行的行号，y表示终止行的行号。
first~step ---- first和step都是整数，其中first表示起始行，step表示行号增长的步长。
1          ---- 指定文件的第一行比较简单 这个比较特殊。
$          ---- 文件的最后一行。
x,+n       ---- 表示指定从x行以及后面的n行文本。
```

例如：

```
10      ---- 代表特定的文本行10行
1,3     ---- 表示1-3行 
0~2     ---- 表示0行开始步长为2 也就是偶数行 
1       ---- 指定文件的第一行比较简单
$       ---- 文件的最后一行。
2,+5    ---- 表示指定从2行到7行
```

#### 1.6.2 正则表达式定位

正则表达式语法：`/regexp/`

两个斜线之间的regexp表示正则表达式，其中，常用的正则表达式元字符如下所列。

-   一般字符：字符本身就匹配字符本身，例如/abc/就是定位包含abc的行。
-   *：表示前置表达式重复了0次或者多次，例如，/a*/表示匹配字符a出现0次或者多次的情况。
-   \+：与星号类似，但是该元字符匹配其前置表达式出现1次以上，属于扩展正则表达式。
-   \?：匹配其前置表达式重复出现0次或者1次。
-   \{i\}：类似于星号，但匹配前置表达式出现i次，如a\{3\}匹配aaa。
-   \{i,j\}：匹配前置表达式最少出现i次，最多出现j次。例如，a\{1,2\}可以匹配a或者aa这两种情况。
-   \{i,\}：匹配其前置表达式至少出现i次。
-   .：匹配任意字符。
-   ^：匹配行首字符。
-   $：匹配行尾字符。
-   []：匹配方括号中的任意单个字符。
-   [^]：匹配不出现在方括号中的任意单个字符。
-   \n：匹配换行符。

**注意**与正则表达式一样，如果要匹配元字符本身，需要使用转义字符。例如想要匹配字符*，则需要使用\*

## 2.0 sed 命令常用操作



[sed 位置定位](#1.6)

















<span id="xxxx1">xxx</span>











<a id="test1">标题1</a>





